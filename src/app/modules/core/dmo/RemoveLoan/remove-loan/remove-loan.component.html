<div class="container">
    <div class="form-wrapper">
      <div class="heading-section ng-star-inserted">
        <div>Remove Loan</div>
        <!-- <div class="font-heading"><strong>Reference Number:</strong> 19-20/DMO/MLA/001</div>
        <div class="font-heading"><strong>Reference Date:</strong> {{ todayDate | date: 'dd-MMM-yyyy HH:mm'}}</div> -->
      </div>
  
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">Home</a></li>
          <li class="breadcrumb-item"><a href="#">DMO</a></li>
          <li class="breadcrumb-item active" aria-current="page">Remove Loan</li>
        </ol>
      </nav>
  
  
      <form [formGroup]="removeLoanForm">
        <!-- Loan Basic Details Starts-->
        <div class="panel-group">
          <div class="box box-primary">
            <div class="box-header">Loan Basic Details</div>
            <div class="box-body">
  
              <div class="row">
  
                <div class="col-sm-3">
                  <mat-form-field (click)="fromDate.open()">
                    <input matInput formControlName="fromDate" [matDatepicker]="fromDate" placeholder="From Date" disabled required>
                    <mat-datepicker-toggle matSuffix [for]="fromDate">
                    </mat-datepicker-toggle>
                    <mat-datepicker #fromDate disabled="false"></mat-datepicker>
                  </mat-form-field>
                </div>
  
                <div class="col-sm-3">
                  <mat-form-field (click)="toDate.open()">
                    <input matInput formControlName="toDate" [matDatepicker]="toDate" placeholder="To Date" disabled required>
                    <mat-datepicker-toggle matSuffix [for]="toDate">
                    </mat-datepicker-toggle>
                    <mat-datepicker #toDate disabled="false"></mat-datepicker>
                  </mat-form-field>
                </div>
  
                <div class="col-sm-3">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="typeOfLoan" placeholder="Type of Loan" (selectionChange)="SelectedTypeOfLoan($event)">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="typeOfLoanCtrl"
                          [placeholderLabel]="'Select Type of Loan ...'"
                          [noEntriesFoundLabel]="'no matching Type of Loan found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let item of typeOfLoan_list | filterSelectInput: typeOfLoanCtrl.value"
                        [value]="item.id">
                        {{item.name}}
                      </mat-option>
                    </mat-select>
                    <!-- <div class="error-wrapper"
                                        *ngIf="removeLoanForm.controls.typeOfLoan.touched && removeLoanForm.controls.typeOfLoan.errors">
                                        <mat-error
                                            *ngIf="removeLoanForm.controls.typeOfLoan.errors?.required">
                                            {{errorMessages.CTS_CHEQUE_TYPE}}
                                        </mat-error>
                                    </div> -->
                  </mat-form-field>
                </div>
  
                <!-- <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput formControlName="loanNo" placeholder="Loan No." numbersOnly>
                  </mat-form-field>
                </div> -->
  
  
                <div class="col-sm-3" *ngIf="selectedTypeOLoan===1974">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="sanctionNo" placeholder="Sanction No.">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="sanctionNoCtrl"
                          [placeholderLabel]="'Select Sanction No. ...'"
                          [noEntriesFoundLabel]="'no matching Sanction No. found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let item of sanctionNo_list | filterSelectInput: sanctionNoCtrl.value"
                        [value]="item">
                        {{item}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
  
                <div class="col-sm-3" *ngIf="selectedTypeOLoan===1975">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="loanDescription" placeholder="Loan Description">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="loanDescriptionCtrl"
                          [placeholderLabel]="'Select Loan Description ...'"
                          [noEntriesFoundLabel]="'no matching Loan Description found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let item of loanDescription_list | filterSelectInput: loanDescriptionCtrl.value"
                        [value]="item">
                        {{item}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
  
                <div class="col-sm-3" *ngIf="selectedTypeOLoan===1976">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="nameOfInstitute" placeholder="Name of Institute">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="nameOfInstituteCtrl"
                          [placeholderLabel]="'Select Name of Institute ...'"
                          [noEntriesFoundLabel]="'no matching Name of Institute found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let item of nameOfInstitute_list | filterSelectInput: nameOfInstituteCtrl.value"
                        [value]="item.id">
                        {{item.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
  
                <div class="col-sm-3"
                  *ngIf="selectedTypeOLoan===1976 && removeLoanForm.controls.nameOfInstitute.value">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="tranche" placeholder="Tranche ">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="trancheCtrl" [placeholderLabel]="'Select Tranche  ...'"
                          [noEntriesFoundLabel]="'no matching Tranche  found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let item of tranche_list | filterSelectInput: trancheCtrl.value"
                        [value]="item">
                        {{item}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
  
                <div class="col-sm-3" *ngIf="selectedTypeOLoan===1973">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="nameOfMinistryDepartment" placeholder="Name of Ministry/Department">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="nameOfMinistryDepartmentCtrl"
                          [placeholderLabel]="'Select Name of Ministry/Department ...'"
                          [noEntriesFoundLabel]="'no matching Name of Ministry/Department found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option
                        *ngFor="let item of nameOfMinistryDepartment_list | filterSelectInput: nameOfMinistryDepartmentCtrl.value"
                        [value]="item.id">
                        {{item.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
  
                <div class="col-sm-3" *ngIf="selectedTypeOLoan===1973">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="loanPurpose" (selectionChange)="loanPurposeSelected($event)" placeholder="Loan Purpose ">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="loanPurposeCtrl"
                          [placeholderLabel]="'Select Loan Purpose  ...'"
                          [noEntriesFoundLabel]="'no matching Loan Purpose found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let item of loanPurpose_list | filterSelectInput: loanPurposeCtrl.value"
                        [value]="item.id">
                        {{item.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
  
                <!-- <div class="col-sm-3" *ngIf="selectedTypeOLoan===1973">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="planSchemeName" placeholder="Plan Scheme Name ">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="planSchemeNameCtrl"
                          [placeholderLabel]="'Select Plan Scheme Name ...'"
                          [noEntriesFoundLabel]="'no matching Plan Scheme Name found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let item of planSchemeName_list | filterSelectInput: planSchemeNameCtrl.value"
                        [value]="item.id">
                        {{item.name}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div> -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput formControlName="planSchemeName" readonly placeholder="Plan Scheme Name" numbersOnly required>
                    <!-- <div class="error-wrapper"
                      *ngIf="removeLoanForm.controls.planSchemeName.touched && removeLoanForm.controls.planSchemeName.errors">
                      <mat-error *ngIf="removeLoanForm.controls.planSchemeName.errors.required">
                        {{errorMessages.PLAN_SCHEME_NAME}}
                      </mat-error>
                    </div> -->
                  </mat-form-field>
                </div>
  
  
              </div>
  
              <!-- Action Button -->
              <div class="form-action-button">
                <button mat-raised-button type="button" color="primary" title="Search" (click)="GetRemoveLoanSearch()">
                  <i class="material-icons" title="Search" aria-hidden="true">search</i>
                  Search
                </button>
                <button type="button" title="Cancel" mat-raised-button class="btnClose" (click)="clearForm();">
                  <i class="material-icons " title="cancel">close</i>
                  Cancel
                </button>
              </div>
  
            </div>
          </div>
        </div>
        <!-- Loan Basic Details Ends-->
      </form>
  
      <div class="mat-elevation-z8 mt-2" *ngIf="ShowDetails">
        <!-- Remove Loan Table Starts -->
        <table mat-table [dataSource]="dataSource" aria-describedby="removeLoanTable">
  
          <!-- Sr. No. -->
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
            <td mat-cell *matCellDef="let element; let i = index;" class="centerAlign">
              {{ i + 1 }} </td>
          </ng-container>
  
  
          <!-- Loan No.    -->
          <ng-container matColumnDef="sanctionNo">
            <th mat-header-cell *matHeaderCellDef scope="row">Sanction No. </th>
            <td mat-cell *matCellDef="let element">
              {{element.sanctionNo}}
            </td>
          </ng-container>
  
          <!-- Loan Receipt Date -->
          <ng-container matColumnDef="loanReceiptDate">
            <th mat-header-cell *matHeaderCellDef scope="row">Loan Receipt Date</th>
            <td mat-cell *matCellDef="let element">
              {{element.loanReceiptDate | date: 'dd-MMM-yyyy'}}
            </td>
          </ng-container>
  
          <!-- Maturity Date -->
          <ng-container matColumnDef="loanMaturityDate">
            <th mat-header-cell *matHeaderCellDef scope="row">Maturity Date</th>
            <td mat-cell *matCellDef="let element">
              {{element.loanMaturityDate | date: 'dd-MMM-yyyy'}}
            </td>
          </ng-container>
  
          <!-- Loan Amount(Rs.) -->
          <ng-container matColumnDef="loanAmount">
            <th mat-header-cell *matHeaderCellDef scope="row">Loan Amount(Rs.)</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.loanAmount | number: '1.2-2'}}
            </td>
          </ng-container>
  
          <!-- Loan Tenure(Years) -->
          <ng-container matColumnDef="loanTenure">
            <th mat-header-cell *matHeaderCellDef scope="row">Loan Tenure(Years) </th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.loanTenure | number: '1.1-1'}}
            </td>
          </ng-container>
  
          <!-- Interest Rate(%) -->
          <ng-container matColumnDef="loanROI">
            <th mat-header-cell *matHeaderCellDef scope="row">Interest Rate(%)</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.loanROI | number: '1.2-2'}}
            </td>
          </ng-container>
  
          <!-- Status -->
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef scope="row">Status</th>
            <td mat-cell *matCellDef="let element">
              {{element.status}}
            </td>
          </ng-container>
  
          <!-- Click For Delete -->
          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef scope="row">
  
              <mat-checkbox (change)="$event ? directiveObj.masterToggle(dataSource) : null"
                [checked]="directiveObj.selection.hasValue() && directiveObj.isAllSelected(dataSource)"
                [indeterminate]="directiveObj.selection.hasValue() && !directiveObj.isAllSelected(dataSource)"
                [aria-label]="directiveObj.checkboxLabel(dataSource)">
              </mat-checkbox>
              &nbsp;
              Click For Delete
  
            </th>
            <td mat-cell *matCellDef="let row" class="centerAlign">
              <mat-checkbox (click)="$event.stopPropagation()"
                (change)="$event ? directiveObj.selection.toggle(row) : null"
                [checked]="directiveObj.selection.isSelected(row)"
                [aria-label]="directiveObj.checkboxLabel(dataSource,row)">
              </mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef>Total</td>
          </ng-container>
  
  
          <!-- Header column of Table -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <!-- Data fetch from .TS File  -->
          <tr mat-row *matRowDef="let row; let i = index;columns: displayedColumns;"></tr>
        </table>
        <!-- Remove Loan Table Ends -->
      </div>
  
  
      <!-- Action Button -->
      <div class="form-action-button" *ngIf="ShowDetails">
        <button type="submit" mat-raised-button color="warn" (click)="DeleteLoan()">
          <i class="material-icons" aria-hidden="true" title="Delete">
            delete_forever
          </i>
          Delete
        </button>
        <button type="button" title="Close" mat-raised-button class="btnClose">
          <i class="material-icons " title="Close">close</i>
          Close
        </button>
      </div>
  
    </div>
  </div>
